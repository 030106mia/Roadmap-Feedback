"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";
import SettingsMenu from "@/components/SettingsMenu";

function IconKanban({ className }: { className?: string }) {
  return (
    <svg
      viewBox="0 0 1024 1024"
      fill="currentColor"
      className={className}
      aria-hidden
    >
      <path d="M688.512 170.88a245.333333 245.333333 0 0 0-346.965333 346.965333l173.482666 173.482667 173.482667-173.482667a245.333333 245.333333 0 0 0 0-346.965333z m-301.696 45.226667a181.333333 181.333333 0 1 1 256.426667 256.469333l-128.213334 128.213333-128.213333-128.213333a181.333333 181.333333 0 0 1 0-256.426667z" />
      <path d="M896 310.656a40.533333 40.533333 0 0 0-53.845333-38.272l-15.36 5.333333a32 32 0 0 0 5.205333 61.781334v448.426666l-207.146667 72.064-197.674666-158.165333a36.266667 36.266667 0 0 0-34.56-5.973333L192 765.696V364.074667l5.162667-1.792a32 32 0 0 0-20.992-60.458667l-20.949334 7.253333A40.533333 40.533333 0 0 0 128 347.434667V798.72a40.533333 40.533333 0 0 0 53.845333 38.272l217.301334-75.562667 197.674666 158.122667a36.266667 36.266667 0 0 0 34.56 5.973333l237.397334-82.602666a40.533333 40.533333 0 0 0 27.221333-38.272V310.613333z" />
    </svg>
  );
}

function IconMessage({ className }: { className?: string }) {
  return (
    <svg
      viewBox="0 0 1024 1024"
      fill="currentColor"
      className={className}
      aria-hidden
    >
      <path d="M931.302 94.293L960 122.99v360.313l-28.698 28.698H822.89L714.477 623.602l-51.018-22.32v-89.281h-63.772l3.189-28.698-3.189-31.886h121.167v76.527l76.527-76.527h105.224v-299.73H363.73v63.772l-31.886-3.189-28.698 3.189v-92.47l28.698-28.698h599.458v0.002zM446.633 658.677c29.76 12.754 56.332 30.823 79.715 54.206 23.383 23.383 41.452 52.081 54.206 86.093 10.629 23.383 17.006 46.766 19.132 70.149l3.189 60.584h-60.584v-31.886c0-27.635-5.314-53.675-15.943-78.121-10.629-24.446-25.509-46.766-44.641-66.961-19.132-20.195-41.452-35.606-66.961-46.235-25.509-10.629-52.081-15.943-79.715-15.943h-3.189c-27.635 0-54.206 5.314-79.715 15.943s-47.829 26.04-66.961 46.235c-19.132 20.195-34.012 42.515-44.641 66.961-10.629 24.446-15.943 50.486-15.943 78.121v31.886H64l3.189-57.395c2.126-25.509 7.44-49.955 15.943-73.338 14.88-34.012 34.012-62.709 57.395-86.093s48.892-41.452 76.527-54.206c-27.635-19.132-49.955-44.109-66.961-74.932s-25.509-64.835-25.509-102.036 9.034-71.744 27.103-103.63 43.578-57.395 76.527-76.527 68.024-28.698 105.224-28.698 71.744 9.566 103.63 28.698 57.395 44.641 76.527 76.527 28.698 66.429 28.698 103.63-8.503 71.212-25.509 102.036c-17.007 30.823-40.39 55.8-70.151 74.932z m-114.79-28.697c42.515 0 78.121-14.349 106.819-43.046s43.046-63.772 43.046-105.224-14.349-76.527-43.046-105.224-63.772-43.046-105.224-43.046-76.527 14.349-105.224 43.046c-28.697 28.698-43.046 63.772-43.046 105.224s14.349 76.527 43.046 105.224 63.24 43.046 103.629 43.046z" />
    </svg>
  );
}

function IconHeart({ className }: { className?: string }) {
  return (
    <svg
      viewBox="0 0 1027 1024"
      fill="currentColor"
      className={className}
      aria-hidden
    >
      <path d="M831.838791 993.047859H265.672544c-25.793451 0-46.428212-19.345088-46.428212-42.559194V432.040302c0-24.503778 20.634761-45.138539 43.848867-45.138539h68.352645l11.607053-11.607053c33.531486-33.531486 88.987406-88.987406 100.594458-166.367758C461.702771 83.828715 506.84131 43.848866 541.662469 32.241814c34.821159-11.607053 73.511335 0 107.042821 33.531486 1.289673 1.289673 1.289673 2.579345 2.579345 2.579345 61.904282 85.118388 23.214106 247.617128 1.289672 321.128463l288.88665 1.289673c25.793451 0 47.717884 9.027708 63.193955 27.083123 16.765743 19.345088 24.503778 49.007557 21.924433 78.670025 0 1.289673 0 2.579345-1.289672 3.869018l-114.780857 433.329975c0 1.289673-1.289673 3.869018-1.289672 5.15869-1.289673 3.869018-2.579345 6.448363-3.869018 9.027708-11.607053 25.793451-24.503778 45.138539-73.511335 45.138539zM270.831234 941.460957h561.007557c19.345088 0 19.345088 0 25.793451-14.186398 1.289673-2.579345 2.579345-6.448363 3.869017-9.027708L974.992443 490.075567c1.289673-15.476071-1.289673-29.662469-9.027707-37.400504-5.15869-6.448363-14.186398-9.027708-24.503779-9.027708l-324.997481-1.289672c-7.738035 0-16.765743-3.869018-20.634761-11.607053-5.15869-6.448363-6.448363-15.476071-2.579345-23.214106 21.924433-60.61461 67.062972-234.720403 18.055416-305.652393-11.607053-11.607053-32.241814-27.083123-52.876574-20.634761-29.662469 10.31738-52.876574 60.61461-64.483628 135.415617-14.186398 92.856423-77.380353 157.34005-114.780856 194.740555l-12.896725 12.896725C352.080605 438.488665 334.025189 438.488665 328.866499 438.488665H270.831234v502.972292z" />
      <path d="M116.070529 980.151134H50.297229C29.662469 980.151134 0 955.647355 0 933.722922V455.254408c0-9.027708 3.869018-16.765743 9.027708-21.924433 11.607053-10.31738 25.793451-9.027708 36.110831-7.738035H116.070529c14.186398 0 25.793451 11.607053 25.793451 25.79345s-11.607053 25.793451-25.793451 25.793451H51.586902v450.095718c1.289673 0 1.289673 1.289673 2.579345 1.289673H116.070529c14.186398 0 25.793451 11.607053 25.793451 25.793451s-11.607053 25.793451-25.793451 25.793451z" />
      <path d="M594.539043 855.052897c-49.007557 0-88.987406-28.372796-100.594459-73.511335-3.869018-14.186398 3.869018-28.372796 18.055416-32.241814s28.372796 3.869018 32.241814 18.055416c2.579345 7.738035 12.896725 34.821159 51.586901 34.821158 25.793451 0 39.979849-11.607053 52.876575-38.690176 5.15869-12.896725 20.634761-19.345088 33.531486-14.186398 12.896725 5.15869 19.345088 20.634761 14.186398 33.531486-21.924433 49.007557-55.455919 72.221662-101.884131 72.221663z" />
      <path d="M457.833753 606.146096c-16.765743 0-30.952141-14.186398-30.952141-30.952141s14.186398-30.952141 30.952141-30.952141 30.952141 14.186398 30.952141 30.952141-14.186398 30.952141-30.952141 30.952141z" />
      <path d="M726.085642 606.146096C709.319899 606.146096 696.423174 591.959698 696.423174 575.193955s14.186398-30.952141 30.952141-30.952141 30.952141 14.186398 30.952141 30.952141-15.476071 30.952141-32.241814 30.952141z" />
    </svg>
  );
}

function IconPreRelease({ className }: { className?: string }) {
  return (
    <svg
      viewBox="0 0 1024 1024"
      fill="currentColor"
      className={className}
      aria-hidden
    >
      <path d="M122.460588 127.065977c-32.213679 0-58.328453 26.114774-58.328453 58.328453s26.114774 58.328453 58.328453 58.328453 58.328453-26.114774 58.328453-58.328453S154.674267 127.065977 122.460588 127.065977zM122.460588 208.930473c-12.999059 0-23.536043-10.536984-23.536043-23.536043s10.536984-23.536043 23.536043-23.536043 23.536043 10.536984 23.536043 23.536043S135.459646 208.930473 122.460588 208.930473z" />
      <path d="M286.963199 243.722884l511.992837 0c32.213679 0 58.328453-26.114774 58.328453-58.328453s-26.114774-58.328453-58.328453-58.328453L286.963199 127.065977c-32.213679 0-58.328453 26.114774-58.328453 58.328453S254.748497 243.722884 286.963199 243.722884zM286.963199 161.858388l511.992837 0c12.999059 0 23.536043 10.536984 23.536043 23.536043s-10.536984 23.536043-23.536043 23.536043L286.963199 208.930473c-12.999059 0-23.536043-10.536984-23.536043-23.536043S273.96414 161.858388 286.963199 161.858388z" />
      <path d="M122.460588 349.978906c-32.213679 0-58.328453 26.114774-58.328453 58.328453s26.114774 58.328453 58.328453 58.328453 58.328453-26.114774 58.328453-58.328453S154.674267 349.978906 122.460588 349.978906zM122.460588 431.843402c-12.999059 0-23.536043-10.536984-23.536043-23.536043s10.536984-23.536043 23.536043-23.536043 23.536043 10.536984 23.536043 23.536043S135.459646 431.843402 122.460588 431.843402z" />
      <path d="M122.460588 571.232033c-32.213679 0-58.328453 26.114774-58.328453 58.328453s26.114774 58.328453 58.328453 58.328453 58.328453-26.114774 58.328453-58.328453S154.674267 571.232033 122.460588 571.232033zM122.460588 653.096529c-12.999059 0-23.536043-10.536984-23.536043-23.536043s10.536984-23.536043 23.536043-23.536043 23.536043 10.536984 23.536043 23.536043S135.459646 653.096529 122.460588 653.096529z" />
      <path d="M286.963199 606.024443l80.104409 0c0.835018-11.779278 2.278903-23.38971 4.325515-34.792411l-84.429925 0c-32.213679 0-58.328453 26.114774-58.328453 58.328453s26.114774 58.328453 58.328453 58.328453l84.429925 0c-2.046612-11.402701-3.490497-23.013133-4.326539-34.792411l-80.103386 0c-12.999059 0-23.536043-10.536984-23.536043-23.536043S273.96414 606.024443 286.963199 606.024443z" />
      <path d="M286.963199 431.843402c-12.999059 0-23.536043-10.536984-23.536043-23.536043s10.536984-23.536043 23.536043-23.536043L475.943294 384.771317c14.481829-12.920264 30.110785-24.577768 46.726208-34.792411L286.963199 349.978906c-32.213679 0-58.328453 26.114774-58.328453 58.328453s26.114774 58.328453 58.328453 58.328453l122.524544 0c6.943133-12.106736 14.646582-23.719214 23.025413-34.792411L286.963199 431.843402z" />
      <path d="M694.187901 361.965915c-147.789974 0-267.594571 119.80562-267.594571 267.594571 0 147.789974 119.804596 267.594571 267.594571 267.594571s267.594571-119.804596 267.594571-267.594571C961.782471 481.771535 841.977875 361.965915 694.187901 361.965915zM694.187901 859.310124c-126.890992 0-229.750661-102.867856-229.750661-229.750661 0-126.882805 102.859669-229.749638 229.750661-229.749638s229.750661 102.866832 229.750661 229.749638C923.938562 756.442268 821.078893 859.310124 694.187901 859.310124z" />
      <path d="M801.779338 649.749294l-61.542658-43.903929L740.23668 487.269759c0-25.432229-20.61655-46.048779-46.048779-46.048779-25.433252 0-46.048779 20.61655-46.048779 46.048779l0 142.290727c0 0.124843 0.008186 0.246617 0.00921 0.37146 0.005117 0.474814 0.01842 0.948605 0.035816 1.422396 0.013303 0.329505 0.026606 0.659009 0.046049 0.986467 0.022513 0.373507 0.053212 0.74599 0.084934 1.118474 0.035816 0.423649 0.072655 0.846274 0.119727 1.266853 0.027629 0.249687 0.063445 0.499373 0.095167 0.74906 0.067538 0.530073 0.141216 1.059122 0.227174 1.583055 0.020466 0.121773 0.042979 0.2415 0.064468 0.36225 0.6191 3.598968 1.648546 7.05672 3.051499 10.316973 0.021489 0.050142 0.046049 0.100284 0.067538 0.149403 0.264013 0.60989 0.537236 1.213641 0.827855 1.809205 0.1361 0.279363 0.284479 0.554632 0.426719 0.831948 0.185218 0.361227 0.364297 0.723477 0.558725 1.078565 0.275269 0.505513 0.566912 1.001817 0.860601 1.49812 0.072655 0.121773 0.141216 0.246617 0.213871 0.36839 1.494027 2.460028 3.235694 4.796236 5.210675 6.974855 0.027629 0.030699 0.054235 0.063445 0.081864 0.093121 0.411369 0.452301 0.838088 0.89437 1.269923 1.332345 0.109494 0.110517 0.216941 0.225127 0.327458 0.334621 0.358157 0.355087 0.726547 0.701988 1.098008 1.046842 0.203638 0.190335 0.406253 0.381693 0.615007 0.567935 0.297782 0.268106 0.603751 0.528026 0.909719 0.788969 0.301875 0.25685 0.604774 0.512676 0.913812 0.762363 0.240477 0.193405 0.48607 0.38374 0.730641 0.574075 0.38988 0.302899 0.783853 0.599657 1.181919 0.889253 0.095167 0.068562 0.184195 0.14224 0.278339 0.209778l80.84733 57.675584c20.703531 14.770402 49.460482 9.958816 64.230883-10.743692C827.292408 693.276646 822.482869 664.519696 801.779338 649.749294zM790.86373 698.528254c-6.236028 8.741082-18.378579 10.771321-27.119661 4.536316l-80.84733-57.675584c-0.161682-0.115634-0.305969-0.246617-0.462534-0.366344-0.287549-0.218988-0.575098-0.438998-0.849344-0.672312-0.243547-0.207731-0.473791-0.424672-0.704035-0.641613-0.223081-0.208754-0.444115-0.417509-0.656963-0.63752-0.243547-0.251733-0.475837-0.511653-0.704035-0.775666-0.181125-0.207731-0.360204-0.416486-0.533143-0.632403-0.221034-0.277316-0.430812-0.561795-0.635473-0.850367-0.162706-0.229221-0.322341-0.458441-0.475837-0.694825-0.181125-0.279363-0.352017-0.564865-0.517793-0.853437-0.154519-0.268106-0.305969-0.538259-0.448208-0.814552-0.137123-0.26606-0.264013-0.533143-0.387833-0.804319-0.144286-0.313132-0.280386-0.62831-0.407276-0.950651-0.099261-0.25071-0.189312-0.502443-0.277316-0.757247-0.119727-0.343831-0.233314-0.690732-0.333598-1.043772-0.071631-0.25378-0.135076-0.51063-0.196475-0.76748-0.083911-0.349971-0.163729-0.699941-0.229221-1.056052-0.053212-0.288572-0.093121-0.578168-0.13303-0.86981-0.044002-0.324388-0.088004-0.649799-0.115634-0.978281-0.029676-0.349971-0.041956-0.699941-0.053212-1.050935-0.00614-0.203638-0.030699-0.405229-0.030699-0.610914l0-142.290727c0-10.737552 8.705266-19.442818 19.442818-19.442818s19.442818 8.705266 19.442818 19.442818l0 132.277676 72.696696 51.862181C795.068496 677.644621 797.098735 689.787172 790.86373 698.528254z" />
    </svg>
  );
}

function NavIconLink({
  href,
  active,
  label,
  children
}: {
  href: string;
  active: boolean;
  label: string;
  children: React.ReactNode;
}) {
  return (
    <Link
      href={href}
      className={[
        "flex h-11 w-11 items-center justify-center rounded-xl border transition-colors",
        active
          ? "border-sky-500/50 bg-sky-50 text-sky-700 dark:border-zinc-600 dark:bg-white dark:text-zinc-950"
          : "border-transparent bg-transparent text-zinc-500 hover:border-zinc-200 hover:bg-zinc-50 dark:text-zinc-400 dark:hover:border-zinc-800 dark:hover:bg-zinc-950/40"
      ].join(" ")}
      title={label}
      aria-label={label}
    >
      {children}
    </Link>
  );
}

export default function LeftNav() {
  const pathname = usePathname() || "";

  const inRoadmap = pathname.startsWith("/dashboard/roadmap");
  const inFeedback = pathname.startsWith("/dashboard/feedback");
  const inPraise = pathname.startsWith("/dashboard/praise");
  const inPreRelease = pathname.startsWith("/dashboard/pre-release-updates");

  return (
    <aside className="sticky top-0 z-40 h-screen w-[72px] shrink-0 border-r border-zinc-200 bg-white/70 px-3 py-4 backdrop-blur dark:border-zinc-800 dark:bg-zinc-950/40">
      <div className="flex h-full flex-col items-center">
        <div className="flex flex-col items-center gap-2">
          <NavIconLink href="/dashboard/roadmap" active={inRoadmap} label="Roadmap">
            <IconKanban className="h-5 w-5" />
          </NavIconLink>

          <NavIconLink
            href="/dashboard/feedback"
            active={inFeedback}
            label="Feedback"
          >
            <IconMessage className="h-5 w-5" />
          </NavIconLink>

          <NavIconLink href="/dashboard/praise" active={inPraise} label="赞扬">
            <IconHeart className="h-5 w-5" />
          </NavIconLink>

          <NavIconLink
            href="/dashboard/pre-release-updates"
            active={inPreRelease}
            label="Pre-release updates"
          >
            <IconPreRelease className="h-5 w-5" />
          </NavIconLink>
        </div>

        <div className="mt-auto pb-2">
          <SettingsMenu compact align="left" placement="top" />
        </div>
      </div>
    </aside>
  );
}

